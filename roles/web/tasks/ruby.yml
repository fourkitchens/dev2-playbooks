---
##
# Ruby tools
#

- name: Ruby | Install rubygems
  action: apt pkg=rubygems state=installed

- name: Install RVM
  shell: curl -L get.rvm.io | bash -s stable creates=/etc/profile.d/rvm.sh

- shell: rvm list
  register: rvm_default

- name: Install Ruby 2.0.0
  shell: >
    executable=/bin/bash source /etc/profile.d/rvm.sh;
    rvm install 2.0.0-p451
  when: rvm_default.stdout.find('* ruby-2.0.0-p451') == -1

- name: Set default ruby version
  shell: >
    executable=/bin/bash source /etc/profile.d/rvm.sh;
    rvm â€”-default use 2.0.0-p451
  when: rvm_default.stdout.find('* ruby-2.0.0-p451') == -1

- name: Add global gemrc file.
  action: copy src=etc/ruby/gemrc dest=/etc/gemrc

- name: Ruby | Install bundler because other Gems are for projects not servers
  action: gem name=bundler state=latest
