---
####
# Imagemagick
#
- name: Imagemagick | Download source
  get_url: url=http://www.imagemagick.org/download/ImageMagick.tar.gz dest=/tmp/ImageMagick.tar.gz

- name: Imagemagick | Untar source
  unarchive: src=/tmp/ImageMagick.tar.gz dest=/tmp/ImageMagick

- name: Imagemagick | Build and Install
  shell: chdir=/tmp/ImageMagick creates=/usr/local/bin/convert ./configure '--with-png=yes' '--with-jpeg=yes' '--with-jp2=yes' '--with-freetype=yes' && make && make install

- name: Imagemagick | Reload libraries
  shell: ldconfig /usr/local/lib

- name: Imagemagick | Cleanup
  file: path=$path state=absent
  with_items:
    - /tmp/ImageMagick.tar.gz
    - /tmp/ImageMagick-6.8.8-7
